<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>European Statistics Awards for Nowcasting - Methodology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/logo-ESA.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://kit.fontawesome.com/78ddb093ea.js" crossorigin="anonymous"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="European Statistics Awards for Nowcasting - Methodology">
<meta property="og:description" content="">
<meta property="og:image" content="https://inseefrlab.github.io/ESA-Nowcasting-2023/images/ets_add.png">
<meta property="og:site-name" content="European Statistics Awards for Nowcasting">
<meta property="og:image:height" content="588">
<meta property="og:image:width" content="958">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/logo-INSEE.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./methodology.html" rel="" target="" aria-current="page">
 <span class="menu-text">Methodology</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ppi.html" rel="" target="">
 <span class="menu-text">PPI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pvi.html" rel="" target="">
 <span class="menu-text">PVI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tourism.html" rel="" target="">
 <span class="menu-text">TOURISM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lessons-learned.html" rel="" target="">
 <span class="menu-text">Lessons Learned</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./reproducibility.html" rel="" target="">
 <span class="menu-text">Reproducibility</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/InseeFrLab/ESA-Nowcasting-2023" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#regarima" id="toc-regarima" class="nav-link active" data-scroll-target="#regarima">Regarima</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#automatic-identification-and-nowcasting" id="toc-automatic-identification-and-nowcasting" class="nav-link" data-scroll-target="#automatic-identification-and-nowcasting">Automatic identification and nowcasting</a></li>
  <li><a href="#seasonal-adjustment-for-tourism" id="toc-seasonal-adjustment-for-tourism" class="nav-link" data-scroll-target="#seasonal-adjustment-for-tourism">Seasonal adjustment for tourism</a></li>
  </ul></li>
  <li><a href="#dynamic-factor-models" id="toc-dynamic-factor-models" class="nav-link" data-scroll-target="#dynamic-factor-models">Dynamic Factor Models</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1">Introduction</a></li>
  <li><a href="#data-used-and-estimation" id="toc-data-used-and-estimation" class="nav-link" data-scroll-target="#data-used-and-estimation">Data used and estimation</a></li>
  <li><a href="#nowcasting" id="toc-nowcasting" class="nav-link" data-scroll-target="#nowcasting">Nowcasting</a></li>
  </ul></li>
  <li><a href="#ets" id="toc-ets" class="nav-link" data-scroll-target="#ets">ETS</a></li>
  <li><a href="#xgboost" id="toc-xgboost" class="nav-link" data-scroll-target="#xgboost">XGBoost</a>
  <ul class="collapse">
  <li><a href="#introduction-2" id="toc-introduction-2" class="nav-link" data-scroll-target="#introduction-2">Introduction</a></li>
  <li><a href="#xgboost-algorithm" id="toc-xgboost-algorithm" class="nav-link" data-scroll-target="#xgboost-algorithm">XGBoost Algorithm</a></li>
  <li><a href="#transforming-time-series" id="toc-transforming-time-series" class="nav-link" data-scroll-target="#transforming-time-series">Transforming Time Series</a></li>
  <li><a href="#grid-search-for-hyperparameters" id="toc-grid-search-for-hyperparameters" class="nav-link" data-scroll-target="#grid-search-for-hyperparameters">Grid Search for Hyperparameters</a></li>
  <li><a href="#training-xgboost-for-nowcasting" id="toc-training-xgboost-for-nowcasting" class="nav-link" data-scroll-target="#training-xgboost-for-nowcasting">Training XGBoost for Nowcasting</a></li>
  </ul></li>
  <li><a href="#lstm" id="toc-lstm" class="nav-link" data-scroll-target="#lstm">LSTM</a>
  <ul class="collapse">
  <li><a href="#introduction-3" id="toc-introduction-3" class="nav-link" data-scroll-target="#introduction-3">Introduction</a></li>
  <li><a href="#ltsm-model" id="toc-ltsm-model" class="nav-link" data-scroll-target="#ltsm-model">LTSM model</a></li>
  <li><a href="#data-and-estimation" id="toc-data-and-estimation" class="nav-link" data-scroll-target="#data-and-estimation">Data and estimation</a></li>
  </ul></li>
  <li><a href="#similarities-and-differences-to-state-of-the-art-techniques" id="toc-similarities-and-differences-to-state-of-the-art-techniques" class="nav-link" data-scroll-target="#similarities-and-differences-to-state-of-the-art-techniques">Similarities and differences to State-of-the-Art techniques</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/InseeFrLab/ESA-Nowcasting-2023/edit/main/methodology.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/InseeFrLab/ESA-Nowcasting-2023/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Methodology</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Our team employed a comprehensive methodology utilizing both standard econometric models and machine learning type models to accurately nowcast the target variables. Specifically, we utilized a combination of three econometric models, including RegArima, Exponential Smoothing (ETS), and Dynamic Factor Models (DFM), as well as two machine learning models, XGBoost and Long Short-Term Memory (LSTM) models, to ensure robust and accurate forecasting. While we applied the same five model classes across all three challenges, including PPI, PVI, and Tourism, we tailored the specific datasets and parameters to each challenge to optimize model performance. This approach allowed us to leverage the strengths of both traditional econometric models and cutting-edge ML techniques to achieve the best possible forecasting results.</p>
<section id="regarima" class="level2">
<h2 class="anchored" data-anchor-id="regarima">Regarima</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>ARIMA modelling is a common type of time models used to capture internal information of a series, wether is is stationary or non stationary. ARIMA models offer some advantages in this exercise: they are relatively simple, easy to interpret, and therefore provide a useful benchmark for more complex models. As standard ARIMA models do not include external information, we use the extended version RegARIMA with external regressors (regression model with ARIMA errors, see <span class="citation" data-cites="chatfield1973box">Chatfield and Prothero (<a href="#ref-chatfield1973box" role="doc-biblioref">1973</a>)</span>):</p>
<p><span class="math display">\[
y_t = c + \sum_{i=1}^{p}\alpha_i x^i_{t}+u_t
\]</span> <span class="math display">\[
\phi(L)(u_t) = \theta(L)(\varepsilon_t)
\]</span></p>
<p>Additional regressors used in this project are of two types:</p>
<ul>
<li>Economic variables presented in the data section. REGARIMA models must keep parsimonious (contrary to other methods implemented in this project), so relevant variables are selected through standard selection procedures or a priori.</li>
<li>Outlier variables such as level-shift or additive outilers to control for atypical observations.</li>
</ul>
<p>Models are applied to the first differentiation of the variable of interest.</p>
</section>
<section id="automatic-identification-and-nowcasting" class="level3">
<h3 class="anchored" data-anchor-id="automatic-identification-and-nowcasting">Automatic identification and nowcasting</h3>
<p>We use the RJdemetra package (the TRAMO part) that provide an easy way to identify and estimate RegARIMA models with high flexibility on parameters.</p>
<ul>
<li>we allow for automatic detection of outliers on the estimation period in order to avoid large bias on coefficients. Without adding outliers, “covid” points, for instance, would totally distort coefficients. Outliers identified through this procedure could in addition be used in other methods</li>
<li>computation time is fast (a few seconds for the whole set of countries)</li>
<li>external regressors are selected independently, a priori or through standard variable selection procedure.</li>
</ul>
<p>The final nowcast value is provided by the projection of the model at horizon 1, 2 or 3, depending on the challenge and the position in the month.</p>
</section>
<section id="seasonal-adjustment-for-tourism" class="level3">
<h3 class="anchored" data-anchor-id="seasonal-adjustment-for-tourism">Seasonal adjustment for tourism</h3>
<p>For tourism, the seasonal component is very strong and may not be the same as the explanatory variables. An X13 pre-treatment is applied to seasonnally adjust and correct for trading days the target variable (Number of nights spent at tourist accommodation establishments) and the potential explanatory variables. This treatment also provides a prediction for the seasonal coefficient of the nowcasted month.</p>
<p>Next, seasonally adjusted variables are put in the REGARIMA model. The final step involves nowcasting the “raw value” by dividing the SA forecast by the projected seasonal coefficient.</p>
</section>
</section>
<section id="dynamic-factor-models" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="dynamic-factor-models">Dynamic Factor Models</h2>
<section id="introduction-1" class="level3">
<h3 class="anchored" data-anchor-id="introduction-1">Introduction</h3>
<p>Dynamic Factor Models (DFM) are a powerful and versatile approach for nowcasting, which involves extracting latent factors from a large set of observed economic or financial indicators. These latent factors capture the underlying dynamics of the data and are used to generate forecasts or predictions in real-time.</p>
<p>DFM are based on the idea that a small number of unobservable factors drive the behavior of a large number of observed variables. These factors represent the common underlying movements in the data and can be interpreted as representing the state of the economy or the financial system at a given point in time. By estimating these latent factors from historical data, DFM allows us to capture the relevant information embedded in the observed indicators and use it to generate accurate nowcasts.</p>
<p>A standard dynamic factor model involves 2 main equations.</p>
<ol type="1">
<li><p><strong>The factor equation (<a href="#eq-factor-equation">Equation&nbsp;1</a>):</strong> This equation represents the dynamics of the latent factors, which are unobservable variables that capture the common underlying movements in the observed data. The factor equation is usually specified as a dynamic system allowing the unobserved factors <span class="math inline">\(F_t\)</span> to evolve according to a <span class="math inline">\(VAR(p)\)</span> process, and can be written as: <span id="eq-factor-equation"><span class="math display">\[
F_t = \sum_{j=1}^pA_{j}F_{t-j} + \eta_t, \qquad \eta_t \sim N(0, \Sigma_{0})
\tag{1}\]</span></span> where <span class="math inline">\(F_t\)</span> represents the vector of latent factors at time <span class="math inline">\(t\)</span>, <span class="math inline">\(A_{j}\)</span> is the (state-) transition matrix capturing the dynamics of the factors at lag <span class="math inline">\(j\)</span>, <span class="math inline">\(F_{t-1}\)</span> is the vector of factors at time <span class="math inline">\(t-1\)</span>, and <span class="math inline">\(\Sigma_{0}\)</span> is the (state-) covariance matrix.</p></li>
<li><p><strong>The measurement equation (<a href="#eq-measurement-equation">Equation&nbsp;2</a>):</strong> This equation links the latent factors to the observed variables. It specifies how the observed variables are generated from the latent factors and can be written as: <span id="eq-measurement-equation"><span class="math display">\[
X_t = \Lambda F_{t} + \xi_t, \qquad \xi_t \sim N(0, R)
\tag{2}\]</span></span> where <span class="math inline">\(X_t\)</span> represents the vector of observed variables at time <span class="math inline">\(t\)</span>, <span class="math inline">\(\Lambda\)</span> is the factor loading matrix, linking the factors to the observed variables, <span class="math inline">\(\xi_t\)</span> is the vector of measurement errors at time <span class="math inline">\(t\)</span> and <span class="math inline">\(R\)</span> is the (measurement-) covariance matrix.</p></li>
</ol>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 62%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Matrices</th>
<th style="text-align: center;">Sizes</th>
<th>Descriptions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(F_t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n \times 1\)</span></td>
<td>Vector of factors at time t <span class="math inline">\((f_{1t}, \ldots, f_{nt})'\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(A_j\)</span></td>
<td style="text-align: center;"><span class="math inline">\(r \times r\)</span></td>
<td>State transition matrix at lag <span class="math inline">\(j\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\Sigma_0\)</span></td>
<td style="text-align: center;"><span class="math inline">\(r \times r\)</span></td>
<td>State covariance matrix</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(X_t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n \times 1\)</span></td>
<td>Vector of observed series at time t <span class="math inline">\((x_{1t}, \ldots, x_{nt})'\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\Lambda\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n \times r\)</span></td>
<td>Factor loading matrix</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(R\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n \times n\)</span></td>
<td>Measurement covariance matrix</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(r\)</span></td>
<td style="text-align: center;"><span class="math inline">\(1 \times 1\)</span></td>
<td>Number of factors</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(p\)</span></td>
<td style="text-align: center;"><span class="math inline">\(1 \times 1\)</span></td>
<td>Number of lags</td>
</tr>
</tbody>
</table>
</section>
<section id="data-used-and-estimation" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="data-used-and-estimation">Data used and estimation</h3>
<div class="page-columns page-full"><p>For the estimation of our Dynamics Factor Models (DFM), we utilized three main sources of data to capture different aspects of the economic and financial activity. These data sources include Eurostat data for economic activity, financial data obtained using the Yahoo API for financial activity, and Google Trends data for capturing more recent evolutions<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. By incorporating these three main sources of data, we aim to capture different aspects of the economic and financial activity, ranging from long-term trends to short-term fluctuations and recent evolutions. This multi-source data approach allows us to build a more comprehensive and robust DFM model, which can provide more accurate and timely nowcasting predictions for the variables of interest.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;You can refer to the <a href="./data.html#sec-data-eurostat">Data</a> section for more extensive details on the data that has been used.</p></li></div></div>
<p>For the estimation of our various Dynamics Factor Models (DFM), we relied on the “dfms” package in R, a powerful and user-friendly tool for estimating DFMs from time series data. The “dfms” package provides convenient and efficient methods for DFM estimation, making it an invaluable resource for our nowcasting project. Its user-friendly interface and optimized algorithms make it easy to implement and customize DFM models, while its efficient computational capabilities enable us to handle large datasets with ease. It allows different type of estimations (see <span class="citation" data-cites="doz2011two">Doz, Giannone, and Reichlin (<a href="#ref-doz2011two" role="doc-biblioref">2011</a>)</span>, <span class="citation" data-cites="doz2012quasi">Doz, Giannone, and Reichlin (<a href="#ref-doz2012quasi" role="doc-biblioref">2012</a>)</span> and <span class="citation" data-cites="banbura2014maximum">Banbura and Modugno (<a href="#ref-banbura2014maximum" role="doc-biblioref">2014</a>)</span>). We really want to thanks Sebastian Krantz, the creator of this package.</p>
<p>To ensure the robustness and accuracy of our DFM estimation, we took several steps beforehand the estimation pipeline of the “dfms” package. Since there are no trend or intercept terms in <a href="#eq-factor-equation">Equation&nbsp;1</a> and <a href="#eq-measurement-equation">Equation&nbsp;2</a>, we made <span class="math inline">\(X_t\)</span> stationary by taking a first difference. Note that <span class="math inline">\(X_t\)</span> is also standardized (scaled and centered) automatically by the “dfms” package.</p>
<p>We also pay attention to the availability of the data to ensure that each observed series have sufficient data for estimation. If any series have inadequate data, it is removed from the estimation process to prevent biased results. We also account for potential collinearities that could occur among several economic variables. Highly correlated series (<span class="math inline">\(\rho \geq 0.9999\)</span>) are removed to mitigate multicollinearity issues and improve estimation accuracy.</p>
<p>To determine the optimal values for the number of lags and factors in our DFM models, we use the <span class="citation" data-cites="bai2002determining">Bai and Ng (<a href="#ref-bai2002determining" role="doc-biblioref">2002</a>)</span> criteria, which provides statistical guidelines for selecting these parameters. We set a maximum limit of 4 lags and 2 factors for computational efficiency reasons.</p>
<p>We initiate the estimation process from February 2005 for all challenges, and for the TOURISM challenge, we performed a seasonal adjustment on the target series prior to estimation in order to account for any seasonal patterns in the data.</p>
</section>
<section id="nowcasting" class="level3">
<h3 class="anchored" data-anchor-id="nowcasting">Nowcasting</h3>
<p>Once the DFM is estimated (<span class="math inline">\(A_j\)</span>, <span class="math inline">\(\Sigma_0\)</span>, <span class="math inline">\(\Lambda\)</span>, <span class="math inline">\(R\)</span>), it can be used for nowcasting by forecasting the latent factors using the factor equation, and then generating nowcasts for the observed variables using the measurement equation. The predictions can be updated in real-time as new data becomes available, allowing for timely and accurate predictions of the variables of interest.</p>
</section>
</section>
<section id="ets" class="level2">
<h2 class="anchored" data-anchor-id="ets">ETS</h2>
<p>Exponential smoothing models (<span class="citation" data-cites="hyndman2008forecasting">Hyndman et al. (<a href="#ref-hyndman2008forecasting" role="doc-biblioref">2008</a>)</span>) are a class of models where forecasts are linear combinations of past values, with the weights decaying exponentially as the observations get older. Therefore, the more recent the observation is, the higher the associated weight is. Moreover, exponential smoothing models do not require any external data.</p>
<p>The exponential smoothing models used are a combination of three components:</p>
<ol type="1">
<li><p>An error: additive (<span class="math inline">\(A\)</span>) or multiplicative (<span class="math inline">\(M\)</span>).</p></li>
<li><p>A trend: additive (<span class="math inline">\(A\)</span>), multiplicative (<span class="math inline">\(M\)</span>), damped (<span class="math inline">\(A_d\)</span> or <span class="math inline">\(M_d\)</span>) or absent (<span class="math inline">\(N\)</span>).</p></li>
<li><p>A seasonality: additive (<span class="math inline">\(A\)</span>), multiplicative <span class="math inline">\(M\)</span> or absent (<span class="math inline">\(N\)</span>). The seasonal component is only used with tourism data.</p></li>
</ol>
<p>See <a href="#fig-ets">Figure&nbsp;1</a> for the description of the model.</p>
<div id="fig-ets" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-ets-add" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/ets_add.png" class="img-fluid figure-img" data-ref-parent="fig-ets"></p>
<figcaption class="figure-caption">(a) Additive error</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-ets-multi" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/ets_multi.png" class="img-fluid figure-img" data-ref-parent="fig-ets"></p>
<figcaption class="figure-caption">(b) Multiplicative error</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><em>Source: <span class="citation" data-cites="hyndman2018forecasting">Hyndman and Athanasopoulos (<a href="#ref-hyndman2018forecasting" role="doc-biblioref">2018</a>)</span> </em></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Exponential smoothing models.</figcaption><p></p>
</figure>
</div>
<p>For each series, the model is selected minimising the Akaike’s Information Criterion (<span class="citation" data-cites="akaike1974new">Akaike (<a href="#ref-akaike1974new" role="doc-biblioref">1974</a>)</span>) and parameters are estimated maximising the likelihood.</p>
</section>
<section id="xgboost" class="level2">
<h2 class="anchored" data-anchor-id="xgboost">XGBoost</h2>
<section id="introduction-2" class="level3">
<h3 class="anchored" data-anchor-id="introduction-2">Introduction</h3>
<p>XGBoost is a powerful algorithm that has gained popularity in the field of machine learning due to its ability to handle complex interactions between variables and its flexibility in handling various types of data. In the context of Eurostat’s nowcasting competition, we utilized the XGBoost algorithm to predict the values of the Producer Price Index, the Producer Volume Index and the Number of nights spent at tourist accommodation establishments for most European countries. We will delve here into the technicalities of the XGBoost approach, and how we tailored it to our specific nowcasting problem.</p>
</section>
<section id="xgboost-algorithm" class="level3">
<h3 class="anchored" data-anchor-id="xgboost-algorithm">XGBoost Algorithm</h3>
<p>XGBoost (<span class="citation" data-cites="chen2016xgboost">Chen and Guestrin (<a href="#ref-chen2016xgboost" role="doc-biblioref">2016</a>)</span>) is a gradient boosting algorithm that is particularly well suited for regression and classification problems. It works by building a sequence of decision trees, each tree trying to correct the errors of the previous tree. During the training process, the algorithm iteratively adds decision trees to the model, where each new tree is fit on the residuals (i.e., the errors) of the previous trees. The final prediction is made by adding the output of all the trees.</p>
<p>To control for overfitting, XGBoost uses a combination of L1 and L2 regularization, also known as “lasso” and “ridge” regularization, respectively. These regularization methods add a penalty term to the loss function, which forces the algorithm to find simpler models. L1 regularization shrinks the less important features’ coefficients to zero, while L2 regularization encourages the coefficients to be small, but does not set them to zero. By using both methods, XGBoost is able to produce models that are both accurate and interpretable.</p>
<p>Another key feature of XGBoost is its ability to handle missing values. Rather than imputing missing values with a fixed value or mean, XGBoost assigns them a default direction in the split, allowing the algorithm to learn how to handle missing values during the training process.</p>
<p>Overall, the XGBoost algorithm has proven to be a powerful tool in the field of machine learning, and its ability to handle large datasets and complex interactions between variables make it well-suited for nowcasting problems like the Eurostat competition.</p>
</section>
<section id="transforming-time-series" class="level3">
<h3 class="anchored" data-anchor-id="transforming-time-series">Transforming Time Series</h3>
<p>To apply the XGBoost algorithm to our nowcasting problem, we first transformed the time series data into a larger dataset tailored for the algorithm. We gathered several sources of data, including financial series, macroeconomic series, and surveys, and created a dataset where each row corresponds to a value per country and per date with many explanatory variables. We added lagged versions of the target variable and some of the explanatory variables as additional features. By doing so, we captured the time series properties of the data and made it suitable for the XGBoost algorithm.</p>
</section>
<section id="grid-search-for-hyperparameters" class="level3">
<h3 class="anchored" data-anchor-id="grid-search-for-hyperparameters">Grid Search for Hyperparameters</h3>
<p>To obtain optimal results from the XGBoost algorithm, we used a grid search technique to find the best combination of hyperparameters for each model. We experimented with various values of hyperparameters, including learning rate, maximum depth, and subsample ratio, to determine which combination of parameters resulted in the best performance. The grid search enabled us to identify the best hyperparameters for the model, allowing us to obtain the most accurate predictions. We did not differentiate the hyperparameters for each country as it would have likely caused even more overfitting.</p>
</section>
<section id="training-xgboost-for-nowcasting" class="level3">
<h3 class="anchored" data-anchor-id="training-xgboost-for-nowcasting">Training XGBoost for Nowcasting</h3>
<p>To predict our 3 indicators for each country, we trained an XGBoost model for each country independently. We randomly split the data into training and testing sets and trained the model on the training set using the optimal hyperparameters obtained from the grid search. We evaluated the model’s performance on the testing set using various metrics such as mean squared error and mean absolute error.</p>
</section>
</section>
<section id="lstm" class="level2">
<h2 class="anchored" data-anchor-id="lstm">LSTM</h2>
<section id="introduction-3" class="level3">
<h3 class="anchored" data-anchor-id="introduction-3">Introduction</h3>
<p>Long Short Term Memory (LTSM) networks (<span class="citation" data-cites="hochreiter1997long">Hochreiter and Schmidhuber (<a href="#ref-hochreiter1997long" role="doc-biblioref">1997</a>)</span>) are a particularly interesting kind of recurrent Neural Network (NN) when it comes to time series forecasting. It allows for learning long-term dependencies in the data without losing performances in grasping short term relations. They overcome the main flaw addressed to recurrent NN models which is the unboundedness of the lookback time window that implies limitations in long-term dependencies. LSTM enable to cope with this problem thanks to the incorporation of a cell space that stores long term information that is updated at each step. This update implies incorporating but more importantly getting rid of some information which regulates for the long term dependence. This is done using a particular structure using repeated modules, each of which is composed of four layers that convey information in a particular way (see@fig-StructureLSTM).</p>
<div id="fig-StructureLSTM" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/lstm.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Architecture of a LSTM Unit (Credits: <a href="https://d2l.ai/chapter_recurrent-modern/lstm.html">https://d2l.ai/chapter_recurrent-modern/lstm.html</a>)</figcaption>
</figure>
</div>
</section>
<section id="ltsm-model" class="level3">
<h3 class="anchored" data-anchor-id="ltsm-model">LTSM model</h3>
<p>During the training process, the LSTM model is fed a sequence of inputs, with each input representing a timestep in the time series. The model then generates a corresponding output for each timestep, which is compared to the actual value to compute a loss function. The weights of the model are updated through backpropagation, where the gradient of the loss function is propagated backwards through the network.</p>
<p>One of the challenges of using LSTMs for time series forecasting is selecting an appropriate window size, or the number of previous timesteps that the model should consider when making each prediction. A larger window size can capture longer-term trends in the data, but may also introduce more noise and complicate the training process. A smaller window size, on the other hand, may be more sensitive to short-term fluctuations in the data, but may not capture longer-term trends as effectively.</p>
<p>In the context of the Eurostat competition, the LSTM approach was used to predict the value of several economic indicators, including the Producer prices in industry, the Producer volume in industry and the Number of nights spent at tourist accommodation establishments. The time series data for each country was transformed into a format that was suitable for LSTM training, with each row representing a single timestep in the time series and the columns representing the various input features.</p>
</section>
<section id="data-and-estimation" class="level3">
<h3 class="anchored" data-anchor-id="data-and-estimation">Data and estimation</h3>
<p>We gathered indicators of the macroeconomic environment from different sources. These data include hard : macro variables, financial indicators, economic surveys, prices and soft indicators. The data is transformed into a large dataset, we included macroeconomic series and their lags. The series are all scaled. The LSTM model is trained independently for each country, with a grid search used to find the optimal hyperparameters for each model. Overall, the LSTM approach proved to be a powerful tool for time series forecasting, and its ability to capture long-term dependencies in the data made it particularly well-suited for the nowcasting problem at hand.</p>
</section>
</section>
<section id="similarities-and-differences-to-state-of-the-art-techniques" class="level2">
<h2 class="anchored" data-anchor-id="similarities-and-differences-to-state-of-the-art-techniques">Similarities and differences to State-of-the-Art techniques</h2>
<p>A few specificities of our work:</p>
<ul>
<li><p>A significant portion of our database comprises classic macroeconomic indicators, including prices, surveys, and Brent. All of them are open source.</p></li>
<li><p>For low-dimensional methods, we ensure minimal control over the consistency of selected variables or signs of estimated coefficients.</p></li>
<li><p>We have compared different methods and included traditional methods in our analysis, but our research also incorporates methods that rely on recent developments.</p></li>
<li><p>We exclusively use open data sources, avoiding non-free data aggregators, which ensures high reproducibility. However, data retrieval can be more expensive, and some non-free data cannot be utilized.</p></li>
<li><p>We made a conscious effort to identify new data sources or indicators. We also incorporate soft data such as Google Trends in our analysis.</p></li>
<li><p>The methods we use combine data with diverse frequencies, up to weekly indicators (created from daily data), allowing us to improve the precision of our predictions up until the last day of each month.</p></li>
</ul>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-akaike1974new" class="csl-entry" role="listitem">
Akaike, Hirotsugu. 1974. <span>“A New Look at the Statistical Model Identification.”</span> <em>IEEE Transactions on Automatic Control</em> 19 (6): 716–23. <a href="https://doi.org/10.1109/TAC.1974.1100705">https://doi.org/10.1109/TAC.1974.1100705</a>.
</div>
<div id="ref-bai2002determining" class="csl-entry" role="listitem">
Bai, Jushan, and Serena Ng. 2002. <span>“Determining the Number of Factors in Approximate Factor Models.”</span> <em>Econometrica</em> 70 (1): 191–221. <a href="https://doi.org/10.1111/1468-0262.00273">https://doi.org/10.1111/1468-0262.00273</a>.
</div>
<div id="ref-banbura2014maximum" class="csl-entry" role="listitem">
Banbura, Marta, and Michele Modugno. 2014. <span>“Maximum Likelihood Estimation of Factor Models on Datasets with Arbitrary Pattern of Missing Data.”</span> <em>Journal of Applied Econometrics</em> 29 (1): 133–60. <a href="https://doi.org/10.1002/jae.2306">https://doi.org/10.1002/jae.2306</a>.
</div>
<div id="ref-chatfield1973box" class="csl-entry" role="listitem">
Chatfield, C., and D. Prothero. 1973. <span>“Box–Jenkins Seasonal Forecasting: Problems in Model Identification.”</span> <em>Journal of the Royal Statistical Society: Series C (Applied Statistics)</em> 22 (3): 280–92. <a href="https://doi.org/10.2307/2346460">https://doi.org/10.2307/2346460</a>.
</div>
<div id="ref-chen2016xgboost" class="csl-entry" role="listitem">
Chen, Tianqi, and Carlos Guestrin. 2016. <span>“XGBoost: A Scalable Tree Boosting System.”</span> In <em>Proceedings of the 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining</em>, 785–94. <a href="https://doi.org/10.1145/2939672.2939785">https://doi.org/10.1145/2939672.2939785</a>.
</div>
<div id="ref-doz2011two" class="csl-entry" role="listitem">
Doz, Catherine, Domenico Giannone, and Lucrezia Reichlin. 2011. <span>“A Two-Step Estimator for Large Approximate Dynamic Factor Models Based on Kalman Filtering.”</span> <em>Journal of Econometrics</em> 164 (1): 188–205. <a href="https://doi.org/10.1016/j.jeconom.2011.02.012">https://doi.org/10.1016/j.jeconom.2011.02.012</a>.
</div>
<div id="ref-doz2012quasi" class="csl-entry" role="listitem">
———. 2012. <span>“A Quasi-Maximum Likelihood Approach for Large, Approximate Dynamic Factor Models.”</span> <em>Review of Economics and Statistics</em> 94 (4): 1014–24. <a href="https://doi.org/10.1162/REST_a_00225">https://doi.org/10.1162/REST_a_00225</a>.
</div>
<div id="ref-hochreiter1997long" class="csl-entry" role="listitem">
Hochreiter, Sepp, and Jürgen Schmidhuber. 1997. <span>“Long Short-Term Memory.”</span> <em>Neural Computation</em> 9 (8): 1735–80. <a href="https://doi.org/10.1162/neco.1997.9.8.1735">https://doi.org/10.1162/neco.1997.9.8.1735</a>.
</div>
<div id="ref-hyndman2018forecasting" class="csl-entry" role="listitem">
Hyndman, Rob J., and George Athanasopoulos. 2018. <em>Forecasting: Principles and Practice</em>. OTexts. <a href="https://otexts.com/fpp2/">https://otexts.com/fpp2/</a>.
</div>
<div id="ref-hyndman2008forecasting" class="csl-entry" role="listitem">
Hyndman, Rob J., Anne B. Koehler, J. Keith Ord, and Ralph D. Snyder. 2008. <span>“Forecasting with Exponential Smoothing: The State Space Approach.”</span> <em>Journal of the American Statistical Association</em> 103 (484): 679–88. <a href="https://doi.org/10.1198/016214508000000269">https://doi.org/10.1198/016214508000000269</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./LICENCE.html">License</a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>